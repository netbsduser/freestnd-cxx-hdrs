diff '--color=auto' -urN include/stdint-gcc.h include-patched/stdint-gcc.h
--- include/stdint-gcc.h	2024-09-05 07:27:19.393557253 +0200
+++ include-patched/stdint-gcc.h	2024-09-05 07:28:40.819840459 +0200
@@ -236,26 +236,59 @@
 #if (!defined __cplusplus || __cplusplus >= 201103L \
      || defined __STDC_CONSTANT_MACROS)
 
-#undef INT8_C
-#define INT8_C(c) __INT8_C(c)
-#undef INT16_C
-#define INT16_C(c) __INT16_C(c)
-#undef INT32_C
-#define INT32_C(c) __INT32_C(c)
-#undef INT64_C
-#define INT64_C(c) __INT64_C(c)
-#undef UINT8_C
-#define UINT8_C(c) __UINT8_C(c)
-#undef UINT16_C
-#define UINT16_C(c) __UINT16_C(c)
-#undef UINT32_C
-#define UINT32_C(c) __UINT32_C(c)
-#undef UINT64_C
-#define UINT64_C(c) __UINT64_C(c)
-#undef INTMAX_C
-#define INTMAX_C(c) __INTMAX_C(c)
-#undef UINTMAX_C
-#define UINTMAX_C(c) __UINTMAX_C(c)
+/* Clang and GCC have different mechanisms for INT32_C and friends. */
+#ifdef __clang__
+#   ifndef __FSTD_HDRS_C_JOIN
+#       define __FSTD_HDRS_C_EXPAND_JOIN(x, suffix) x ## suffix
+#       define __FSTD_HDRS_C_JOIN(x, suffix) __FSTD_HDRS_C_EXPAND_JOIN(x, suffix)
+#   endif
+
+#   undef INT8_C
+#   define INT8_C(x) __FSTD_HDRS_C_JOIN(x, __INT8_C_SUFFIX__)
+#   undef INT16_C
+#   define INT16_C(x) __FSTD_HDRS_C_JOIN(x, __INT16_C_SUFFIX__)
+#   undef INT32_C
+#   define INT32_C(x) __FSTD_HDRS_C_JOIN(x, __INT32_C_SUFFIX__)
+#   undef INT64_C
+#   define INT64_C(x) __FSTD_HDRS_C_JOIN(x, __INT64_C_SUFFIX__)
+
+#   undef UINT8_C
+#   define UINT8_C(x) __FSTD_HDRS_C_JOIN(x, __UINT8_C_SUFFIX__)
+#   undef UINT16_C
+#   define UINT16_C(x) __FSTD_HDRS_C_JOIN(x, __UINT16_C_SUFFIX__)
+#   undef UINT32_C
+#   define UINT32_C(x) __FSTD_HDRS_C_JOIN(x, __UINT32_C_SUFFIX__)
+#   undef UINT64_C
+#   define UINT64_C(x) __FSTD_HDRS_C_JOIN(x, __UINT64_C_SUFFIX__)
+
+#   undef INTMAX_C
+#   define INTMAX_C(x) __FSTD_HDRS_C_JOIN(x, __INTMAX_C_SUFFIX__)
+#   undef UINTMAX_C
+#   define UINTMAX_C(x) __FSTD_HDRS_C_JOIN(x, __UINTMAX_C_SUFFIX__)
+#else
+#   undef INT8_C
+#   define INT8_C(x) __INT8_C(x)
+#   undef INT16_C
+#   define INT16_C(x) __INT16_C(x)
+#   undef INT32_C
+#   define INT32_C(x) __INT32_C(x)
+#   undef INT64_C
+#   define INT64_C(x) __INT64_C(x)
+
+#   undef UINT8_C
+#   define UINT8_C(x) __UINT8_C(x)
+#   undef UINT16_C
+#   define UINT16_C(x) __UINT16_C(x)
+#   undef UINT32_C
+#   define UINT32_C(x) __UINT32_C(x)
+#   undef UINT64_C
+#   define UINT64_C(x) __UINT64_C(x)
+
+#   undef INTMAX_C
+#   define INTMAX_C(x) __INTMAX_C(x)
+#   undef UINTMAX_C
+#   define UINTMAX_C(x) __UINTMAX_C(x)
+#endif
 
 #endif /* (!defined __cplusplus || __cplusplus >= 201103L
 	   || defined __STDC_CONSTANT_MACROS) */
